<ion-col class="list" role="list" aria-label="Filtered product list">

  <ng-container *ngIf="(products$ | async) as products">
    <ng-container *ngIf="products.length > 0; else emptyState">
      <ng-container *ngFor="let product of products">
        <app-product
          *ngIf="isCategoryVisible(product.category)"
          [product]="product"
          role="listitem"
          [attr.aria-label]="'View details for ' + product.title"
        ></app-product>
      </ng-container>
    </ng-container>
  </ng-container>

  <ng-template #emptyState>
    <div *ngIf="hasLoaded; else loading" class="empty-state">
      <p>No products found.</p>
    </div>
  </ng-template>


  <ng-template #loading>
    <div class="loading-container">
      <ion-spinner name="crescent"></ion-spinner>
    </div>
  </ng-template>
</ion-col>
