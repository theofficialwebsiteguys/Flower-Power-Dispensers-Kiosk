"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[600],{600:(X,q,d)=>{d.d(q,{d:()=>J});var n=d(4341),e=d(4438),b=d(6549),x=d(671),T=d(9216),Y=d(7423),M=d(177),c=d(4742);const j=()=>({mode:"login"});function A(r,a){if(1&r&&(e.j41(0,"div",37),e.EFF(1),e.k0s()),2&r){const g=e.XpG();e.R7$(),e.JRh(g.error)}}function B(r,a){1&r&&(e.j41(0,"div",38),e.EFF(1," First name is required and must be at least 2 characters. "),e.k0s())}function S(r,a){1&r&&(e.j41(0,"div",38),e.EFF(1," Last name is required and must be at least 2 characters. "),e.k0s())}function U(r,a){1&r&&(e.j41(0,"div",38),e.EFF(1," Valid email is required. "),e.k0s())}function G(r,a){if(1&r&&(e.j41(0,"ion-select-option",39),e.EFF(1),e.k0s()),2&r){const g=a.$implicit;e.Y8G("value",g.code),e.R7$(),e.Lme(" ",g.name," (",g.dialCode,") ")}}function L(r,a){1&r&&(e.j41(0,"div",38),e.EFF(1," Phone number is required and must be valid. "),e.k0s())}function V(r,a){1&r&&(e.j41(0,"div",38),e.EFF(1," A valid Date of Birth of 21+ is Required. "),e.k0s())}function K(r,a){1&r&&(e.j41(0,"div",38),e.EFF(1," Password is required and must be at least 6 characters. "),e.k0s())}function z(r,a){1&r&&(e.j41(0,"div",38),e.EFF(1," Passwords do not match. "),e.k0s())}function W(r,a){1&r&&e.nrm(0,"ion-spinner",40)}function Q(r,a){1&r&&(e.j41(0,"p",41),e.EFF(1," Already have an account? "),e.j41(2,"a",42),e.EFF(3,"Login"),e.k0s()()),2&r&&(e.R7$(2),e.Y8G("queryParams",e.lJ4(1,j)))}let J=(()=>{var r;class a{constructor(o,t,i,l,s){this.fb=o,this.router=t,this.authService=i,this.settingsService=l,this.accessibilityService=s,this.isCustomer=!0,this.loading=!1,this.submitted=!1,this.error="",this.isFormTouched=!1,this.countries=[{name:"United States",dialCode:"+1",code:"US"},{name:"United Kingdom",dialCode:"+44",code:"GB"},{name:"France",dialCode:"+33",code:"FR"},{name:"Germany",dialCode:"+49",code:"DE"},{name:"Croatia",dialCode:"+385",code:"HR"},{name:"Canada",dialCode:"+1",code:"CA"},{name:"Australia",dialCode:"+61",code:"AU"},{name:"India",dialCode:"+91",code:"IN"},{name:"Japan",dialCode:"+81",code:"JP"},{name:"China",dialCode:"+86",code:"CN"},{name:"Italy",dialCode:"+39",code:"IT"},{name:"Spain",dialCode:"+34",code:"ES"},{name:"Mexico",dialCode:"+52",code:"MX"},{name:"Brazil",dialCode:"+55",code:"BR"},{name:"South Africa",dialCode:"+27",code:"ZA"},{name:"New Zealand",dialCode:"+64",code:"NZ"},{name:"Russia",dialCode:"+7",code:"RU"},{name:"South Korea",dialCode:"+82",code:"KR"}],this.selectedCountryCode=this.countries[0].dialCode,this.dobEmptyError=!1,this.dobInvalidError=!1,this.underageError=!1,this.currentYear=(new Date).getFullYear(),this.darkModeEnabled=!1,this.registerForm=this.fb.group({firstName:["",[n.k0.required,n.k0.minLength(2)]],lastName:["",[n.k0.required,n.k0.minLength(2)]],email:["",[n.k0.required,n.k0.email]],countryCode:[this.countries[0].code,n.k0.required],phone:["",[n.k0.required,n.k0.pattern(/^\d{7,15}$/)]],month:["",[n.k0.required,n.k0.pattern(/^(0[1-9]|1[0-2])$/)]],day:["",[n.k0.required,n.k0.pattern(/^(0[1-9]|[12][0-9]|3[01])$/)]],year:["",[n.k0.required,n.k0.pattern(new RegExp(`^(19[0-9][0-9]|20[0-9][0-9]|20${Math.floor(this.currentYear/10)}[0-${this.currentYear%10}])$`))]],password:["",[n.k0.required,n.k0.minLength(6)]],confirmPassword:["",[n.k0.required]]},{validator:this.passwordMatchValidator})}ngOnInit(){window.addEventListener("resize",this.handleKeyboard.bind(this)),this.registerForm.valueChanges.subscribe(()=>{this.isFormTouched=!0}),this.settingsService.isDarkModeEnabled$.subscribe(o=>{this.darkModeEnabled=o})}ngOnDestroy(){this.resetForm(),window.removeEventListener("resize",this.handleKeyboard.bind(this))}handleKeyboard(){const o=document.activeElement;o&&"INPUT"===o.tagName&&o.scrollIntoView({behavior:"smooth",block:"center"})}onSubmit(){var o,t,i;if(this.submitted=!0,this.registerForm.invalid)return this.accessibilityService.announce("Please correct the errors in the form.","assertive"),void(this.loading=!1);this.loading=!0;const l=null===(o=this.registerForm.get("month"))||void 0===o?void 0:o.value,s=null===(t=this.registerForm.get("day"))||void 0===t?void 0:t.value,p=null===(i=this.registerForm.get("year"))||void 0===i?void 0:i.value;if(console.log(l),console.log(s),console.log(p),!(l&&s&&p))return this.dobEmptyError=!0,void(this.loading=!1);this.dobEmptyError=!1;const u=new Date(`${p}-${l}-${s}`);if(console.log(u),console.log(isNaN(u.getTime())),isNaN(u.getTime()))return this.dobInvalidError=!0,this.accessibilityService.announce("Invalid date of birth.","assertive"),void(this.loading=!1);this.dobInvalidError=!1;const h=this.calculateAge(u);if(console.log(h),h<21)return this.underageError=!0,this.accessibilityService.announce("You must be at least 21 years old to register.","assertive"),void(this.loading=!1);if(this.underageError=!1,this.registerForm.invalid)return;this.loading=!0,this.error="";const m=this.registerForm.value;this.authService.register({fname:m.firstName,lname:m.lastName,email:m.email,dob:u,country:m.countryCode,phone:m.phone,password:m.password},this.isCustomer).subscribe({next:()=>{this.loading=!1,this.resetForm()},error:f=>{this.loading=!1;const _=f.error.error;this.error=500===f.status?_.includes("SequelizeUniqueConstraintError")?"This user already exists in the system.":_.includes("SequelizeValidationError")?"The provided phone or email is invalid.":"An unexpected error occurred. Please try again later.":"Unable to register a new user at this time. Please try again later."}})}resetForm(){this.registerForm.reset(),this.submitted=!1,this.error="",this.isFormTouched=!1,this.dobEmptyError=!1,this.dobInvalidError=!1,this.underageError=!1}onCountryCodeChange(){var o;const t=null===(o=this.registerForm.get("countryCode"))||void 0===o?void 0:o.value,i=this.registerForm.get("phone");i&&i.setValue(`${t}${i.value||""}`)}passwordMatchValidator(o){var t,i;return(null===(t=o.get("password"))||void 0===t?void 0:t.value)===(null===(i=o.get("confirmPassword"))||void 0===i?void 0:i.value)?null:{notMatching:!0}}calculateAge(o){const t=new Date,i=t.getFullYear()-o.getFullYear(),l=t.getMonth()-o.getMonth();return l<0||0===l&&t.getDate()<o.getDate()?i-1:i}}return(r=a).\u0275fac=function(o){return new(o||r)(e.rXU(n.ok),e.rXU(b.Ix),e.rXU(x.u),e.rXU(T.h),e.rXU(Y.s))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-register"]],inputs:{isCustomer:"isCustomer"},decls:58,vars:41,consts:[["role","main","aria-labelledby","login-heading",1,"log-in-page"],[1,"login-container"],[1,"login-header"],[1,"login-header-logo"],["alt","Your Website Guy Logo",1,"logo",3,"src"],["id","login-heading",1,"sr-only"],["class","error-message","aria-live","assertive",4,"ngIf"],["aria-describedby","form-instructions",3,"ngSubmit","formGroup"],["id","form-instructions",1,"sr-only"],[1,"name-row"],[1,"form-group"],["for","firstName",1,"required"],["type","text","id","firstName","formControlName","firstName","placeholder","Enter your first name","required",""],["class","form-error","aria-live","assertive",4,"ngIf"],["for","lastName",1,"required"],["type","text","id","lastName","formControlName","lastName","placeholder","Enter your last name","required",""],["for","email",1,"required"],["type","email","id","email","formControlName","email","placeholder","Enter your email","required",""],[1,"form-group","phone-group"],[1,"country-code"],["for","countryCode",1,"required"],["formControlName","countryCode","id","countryCode","placeholder","Select Country Code","interface","popover","aria-required","true"],[3,"value",4,"ngFor","ngForOf"],[1,"phone-number"],["type","tel","id","phone","formControlName","phone","placeholder","Enter your phone number","required",""],["for","dob",1,"required"],[1,"dob-container"],["type","tel","id","month","formControlName","month","placeholder","MM","maxlength","2","required","","aria-required","true",1,"dob-input"],["type","tel","id","day","formControlName","day","placeholder","DD","maxlength","2","required","","aria-required","true",1,"dob-input"],["type","tel","id","year","formControlName","year","placeholder","YYYY","maxlength","4","required","","aria-required","true",1,"dob-input"],["for","password",1,"required"],["type","password","id","password","formControlName","password","placeholder","Enter your password","required","","aria-required","true"],["for","confirmPassword",1,"required"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password","required","","aria-required","true"],["expand","block","type","submit","aria-label","Submit Registration Form",3,"disabled"],["slot","start","aria-hidden","true",4,"ngIf"],["class","login-link",4,"ngIf"],["aria-live","assertive",1,"error-message"],["aria-live","assertive",1,"form-error"],[3,"value"],["slot","start","aria-hidden","true"],[1,"login-link"],["routerLink","/auth","aria-label","Log in to your account",3,"queryParams"]],template:function(o,t){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.nrm(4,"img",4),e.k0s()(),e.j41(5,"h1",5),e.EFF(6,"Register for Flower Power"),e.k0s(),e.DNE(7,A,2,1,"div",6),e.j41(8,"form",7),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(9,"p",8),e.EFF(10,"Fill out all required fields marked with an asterisk (*)."),e.k0s(),e.j41(11,"div",9)(12,"div",10)(13,"label",11),e.EFF(14,"First Name"),e.k0s(),e.nrm(15,"input",12),e.DNE(16,B,2,0,"div",13),e.k0s(),e.j41(17,"div",10)(18,"label",14),e.EFF(19,"Last Name"),e.k0s(),e.nrm(20,"input",15),e.DNE(21,S,2,0,"div",13),e.k0s()(),e.j41(22,"div",10)(23,"label",16),e.EFF(24,"Email"),e.k0s(),e.nrm(25,"input",17),e.DNE(26,U,2,0,"div",13),e.k0s(),e.j41(27,"div",18)(28,"div",19)(29,"label",20),e.EFF(30,"Phone"),e.k0s(),e.j41(31,"ion-select",21),e.DNE(32,G,2,3,"ion-select-option",22),e.k0s()(),e.j41(33,"div",23),e.nrm(34,"input",24),e.k0s(),e.DNE(35,L,2,0,"div",13),e.k0s(),e.j41(36,"div",10)(37,"label",25),e.EFF(38,"Date of Birth"),e.k0s(),e.j41(39,"div",26),e.nrm(40,"input",27)(41,"input",28)(42,"input",29),e.k0s(),e.DNE(43,V,2,0,"div",13),e.k0s(),e.j41(44,"div",10)(45,"label",30),e.EFF(46,"Password"),e.k0s(),e.nrm(47,"input",31),e.DNE(48,K,2,0,"div",13),e.k0s(),e.j41(49,"div",10)(50,"label",32),e.EFF(51,"Confirm Password"),e.k0s(),e.nrm(52,"input",33),e.DNE(53,z,2,0,"div",13),e.k0s(),e.j41(54,"ion-button",34),e.DNE(55,W,1,0,"ion-spinner",35),e.EFF(56," Register "),e.k0s()(),e.DNE(57,Q,4,2,"p",36),e.k0s()()),2&o){let i,l,s,p,v,u,h,m,C,f,_,y,P,F,E,O,k,R,w,N,$,D,I;e.R7$(4),e.Y8G("src",t.darkModeEnabled?"assets/logo-dark-mode.png":"assets/logo.png",e.B4B),e.R7$(3),e.Y8G("ngIf",t.error),e.R7$(),e.Y8G("formGroup",t.registerForm),e.R7$(7),e.AVh("invalid",t.submitted&&(null==(i=t.registerForm.get("firstName"))?null:i.invalid)),e.BMQ("ria-invalid",t.submitted&&(null==(l=t.registerForm.get("firstName"))?null:l.invalid)),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==(s=t.registerForm.get("firstName"))?null:s.invalid)),e.R7$(4),e.AVh("invalid",t.submitted&&(null==(p=t.registerForm.get("lastName"))?null:p.invalid)),e.BMQ("aria-invalid",t.submitted&&(null==(v=t.registerForm.get("lastName"))?null:v.invalid)),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==(u=t.registerForm.get("lastName"))?null:u.invalid)),e.R7$(4),e.AVh("invalid",t.submitted&&(null==(h=t.registerForm.get("email"))?null:h.invalid)),e.BMQ("aria-invalid",t.submitted&&(null==(m=t.registerForm.get("email"))?null:m.invalid)),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==(C=t.registerForm.get("email"))?null:C.invalid)),e.R7$(6),e.Y8G("ngForOf",t.countries),e.R7$(2),e.AVh("invalid",t.submitted&&(null==(f=t.registerForm.get("phone"))?null:f.invalid)),e.BMQ("aria-invalid",t.submitted&&(null==(_=t.registerForm.get("phone"))?null:_.invalid)),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==(y=t.registerForm.get("phone"))?null:y.invalid)),e.R7$(5),e.AVh("invalid",t.submitted&&(null==(P=t.registerForm.get("month"))?null:P.invalid)),e.BMQ("aria-invalid",t.submitted&&(null==(F=t.registerForm.get("month"))?null:F.invalid)),e.R7$(),e.AVh("invalid",t.submitted&&(null==(E=t.registerForm.get("day"))?null:E.invalid)),e.BMQ("aria-invalid",t.submitted&&(null==(O=t.registerForm.get("day"))?null:O.invalid)),e.R7$(),e.AVh("invalid",t.submitted&&(null==(k=t.registerForm.get("year"))?null:k.invalid)),e.BMQ("aria-invalid",t.submitted&&(null==(R=t.registerForm.get("year"))?null:R.invalid)),e.R7$(),e.Y8G("ngIf",t.submitted&&t.dobEmptyError||t.dobInvalidError||t.underageError),e.R7$(4),e.AVh("invalid",t.submitted&&(null==(w=t.registerForm.get("password"))?null:w.invalid)),e.BMQ("aria-invalid",t.submitted&&(null==(N=t.registerForm.get("password"))?null:N.invalid)),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==($=t.registerForm.get("password"))?null:$.invalid)),e.R7$(4),e.AVh("invalid",t.submitted&&(null==(D=t.registerForm.get("notMatching"))?null:D.invalid)),e.BMQ("aria-invalid",t.submitted&&(null==(I=t.registerForm.get("notMatching"))?null:I.invalid)),e.R7$(),e.Y8G("ngIf",t.submitted&&t.registerForm.hasError("notMatching")),e.R7$(),e.Y8G("disabled",!t.isFormTouched||t.loading),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(2),e.Y8G("ngIf",!t.isCustomer)}},dependencies:[M.Sq,M.bT,c.Jm,c.Nm,c.Ip,c.w2,c.Je,c.oY,n.qT,n.me,n.BC,n.cb,n.YS,n.tU,b.Wk,n.j4,n.JD],styles:['.log-in-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px;padding-top:calc(env(safe-area-inset-top,20px) + 20px)}@supports (padding-bottom: env(safe-area-inset-bottom)){.log-in-page[_ngcontent-%COMP%]{padding-bottom:calc(env(safe-area-inset-bottom) + 50px)}}.login-container[_ngcontent-%COMP%]{width:100%;max-width:420px;padding:20px;border-radius:8px;box-shadow:0 4px 12px #0000001a;animation:_ngcontent-%COMP%_fadeInUp .4s ease-in-out;max-height:calc(100vh - 50px);overflow-y:auto;display:flex;flex-direction:column;align-items:stretch}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:16px;font-weight:700;color:#333}.login-header-logo[_ngcontent-%COMP%]{text-align:center;margin:16px auto}.login-header-logo[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:150px;height:auto}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:600;color:#333}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:"*";color:var(--ion-color-danger);margin-left:2px}.form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #dcdcdc;border-radius:8px;font-size:16px;background-color:#f9f9f9;color:#333}.form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{border-color:var(--ion-color-primary);outline:none}.name-row[_ngcontent-%COMP%]{display:flex;gap:16px}.name-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.login-link[_ngcontent-%COMP%]{text-align:center;margin-top:16px}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ion-color-primary-tint);text-decoration:underline;font-size:14px}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--ion-color-primary)}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.phone-number[_ngcontent-%COMP%]{margin-top:auto}.phone-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:flex-start;flex-wrap:wrap}.phone-group[_ngcontent-%COMP%]   .country-code[_ngcontent-%COMP%]{flex:0 0 80px;display:flex;flex-direction:column;width:20%}.phone-group[_ngcontent-%COMP%]   .country-code[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:4px;font-weight:700}.phone-group[_ngcontent-%COMP%]   .country-code[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{width:100%;height:45px;padding:0 8px;border:1px solid #dcdcdc;border-radius:4px;background-color:#f9f9f9;--highlight-color-valid: var(--ion-color-primary)}.phone-group[_ngcontent-%COMP%]   .country-code[_ngcontent-%COMP%]   ion-select.select-expanded[_ngcontent-%COMP%]{border-color:var(--ion-color-primary)}.phone-group[_ngcontent-%COMP%]   .phone-number[_ngcontent-%COMP%]{flex:1}.phone-group[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:.8rem;margin-top:4px;text-align:left;grid-column:span 2}.dob-container[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.dob-container[_ngcontent-%COMP%]   .dob-input[_ngcontent-%COMP%]{width:calc(33.33% - 8px);padding:10px;font-size:16px;border:1px solid #dcdcdc;border-radius:4px;background-color:#f9f9f9;text-align:center;transition:border-color .3s ease}.dob-container[_ngcontent-%COMP%]   .dob-input[_ngcontent-%COMP%]::placeholder{color:#aaa}.dob-container[_ngcontent-%COMP%]   .dob-input[_ngcontent-%COMP%]:focus{border-color:var(--ion-color-primary);outline:none}.dob-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-danger);margin-top:5px}.form-error[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:.8rem;margin-top:.4rem;display:block;text-align:left;padding-left:.2rem}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);background:rgba(var(--ion-color-danger-rgb),.12);padding:.8rem;border-radius:8px;font-size:.9rem;text-align:center;margin-bottom:1rem;box-shadow:0 2px 4px #d32f2f1a}']}),a})()}}]);